import numpy as np

def overlap(i1,j1,i2,j2,x,y,type):
    if type=='vv':
        if (j2>=j1 and j2<j1+y and i2>=i1 and i2<i1+x) or (j2+y>=j1 and j2+y<j1+y and i2+x>=i1 and i2+x<i1+x):
            return True
        elif (i1==i2 and j1==j2):
            return True
    elif type=='hv':
        if (j2>=j1 and j2<j1+x and i2>=i1 and i2<i1+y) or (j2+y>=j1 and j2+y<j1+x and i2+x>=i1 and i2+x<i1+y):
            return True
        elif (i1==i2 and j1==j2):
            return True
    elif type =='vh':
        if (j2>=j1 and j2<j1+y and i2>=i1 and i2<i1+x) or (j2+x>=j1 and j2+x<j1+y and i2+y>=i1 and i2+y<i1+x):
            return True
        elif (i1==i2 and j1==j2):
            return True
    else:
        if (j2>=j1 and j2<j1+x and i2>=i1 and i2<i1+y) or (j2+x>=j1 and j2+x<j1+x and i2+y>=i1 and i2+y<i1+y):
            return True
        elif (i1==i2 and j1==j2):
            return True
    return False

r,c = [int(i) for i in input().split()]
x,y = [int(i) for i in input().split()]

pattern = np.array([[int(i) for i in input().split()] for _ in range(r)])
# print(pattern)
maxara = 0

# dyo idia vertical
max1 = 0
for j in range(c-y+1):
    for i in range(r-x+1):
        subar = pattern[i:x+i,j:y+j]
        temp = sum(sum(x) for x in subar)
        # print(temp)
        if temp>max1:
            max1 = temp
            max_i = i
            max_j = j
            max1_subar = subar
        # print(subar)
        # print()

max2 = 0
for j in range(c-y+1):
    for i in range(r-x+1):
        if not overlap(max_i,max_j,i,j,x,y,'vv'):
            subar = pattern[i:x+i,j:y+j]
            temp = sum(sum(x) for x in subar)
            if temp>max2:
                max2 = temp
                max2_subar = subar

res = max1+max2
# print(res)
# print(max1_subar)
# print(max2_subar)
if res>maxara:
    maxara = res


# proto horizontal deutero vertical
max1 =0
for j in range(c-x+1):
    for i in range(r-y+1):
        subar = pattern[i:y+i,j:x+j]
        temp = sum(sum(x) for x in subar)
        if temp>max1:
            max1 = temp
            max_i = i
            max_j = j
        # print(subar)
        # print()

max2 = 0
for j in range(c-y+1):
    for i in range(r-x+1):
        if not overlap(max_i,max_j,i,j,x,y,'hv'):
            subar = pattern[i:x+i,j:y+j]
            temp = sum(sum(x) for x in subar)
            if temp>max2:
                max2 = temp

res = max1+max2
if res>maxara:
    maxara = res

# proto vertical deutero horizontal
max1 =0
for j in range(c-y+1):
    for i in range(r-x+1):
        subar = pattern[i:x+i,j:y+j]
        temp = sum(sum(x) for x in subar)
        if temp>max1:
            max1 = temp
            max_i = i
            max_j = j
            max1_subar = subar
        # print(subar)
        # print()

max2 = 0
for j in range(c-x+1):
    for i in range(r-y+1):
        if not overlap(max_i,max_j,i,j,x,y,'hv'):
            subar = pattern[i:y+i,j:x+j]
            temp = sum(sum(x) for x in subar)
            if temp>max2:
                max2 = temp

res = max1+max2
if res>maxara:
    maxara = res
    # print(res)



# duo horizontal
max1 =0
for j in range(c-x+1):
    for i in range(r-y+1):
        subar = pattern[i:y+i,j:x+j]
        temp = sum(sum(x) for x in subar)
        if temp>max1:
            max1 = temp
            max_i = i
            max_j = j
        # print(subar)
        # print()

max2 = 0
for j in range(c-x+1):
    for i in range(r-y+1):
        if not overlap(max_i,max_j,i,j,x,y,'hh'):
            subar = pattern[i:y+i,j:x+j]
            temp = sum(sum(x) for x in subar)
            if temp>max2:
                max2 = temp



res = max1+max2
if res>maxara:
    maxara = res
print(maxara)

sub1 = pattern[0:x,0:y]
sub2 = pattern[1:y+1,1:x+1]

# print(sub1)
# print(sub2)
# if overlap(0,0,1,1,x,y,'vh'):
#     print('mpika')
